
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Retail Invoice - SYED MEDICAL STORE</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff;
      padding: 20px;
      color: #000;
    }
    .invoice-box {
      width: 100%;
      max-width: 960px;
      margin: auto;
      padding: 20px;
      border: 2px solid #000;
    }
    h2 {
      color: #1976D2;
      margin-bottom: 0;
    }
    .top-header, .patient-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .top-header div, .patient-info div {
      flex: 1;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #333;
    }
    th, td {
      padding: 6px;
      font-size: 14px;
      text-align: center;
    }
    input {
      width: 100%;
      border: none;
      font-size: 14px;
      text-align: center;
    }
    tfoot td {
      font-weight: bold;
    }
    .summary {
      margin-top: 10px;
      font-size: 14px;
    }
    .summary td {
      padding: 5px;
    }
    .note {
      font-size: 12px;
      margin-top: 10px;
    }
    .print-btn {
      margin-top: 15px;
      float: right;
      padding: 8px 16px;
      background-color: #1976D2;
      color: white;
      border: none;
      cursor: pointer;
    }
    .print-btn:hover {
      background-color: #0D47A1;
    }
  
@media print {
  body, html {
    width: 210mm;
    height: 297mm;
    margin: 0;
    padding: 0;
    -webkit-print-color-adjust: exact;
  }
  .invoice-box {
    box-shadow: none;
    margin: 0;
    width: 190mm;
    padding: 10mm;
    border: none;
  }
  .print-btn {
    display: none;
  }
}
.invoice-box {
  width: 794px;
  max-width: 794px;
  margin: auto;
  padding: 20px;
  box-sizing: border-box;
  background: white;
}
</style>
</head>
<body>
<div class="invoice-box">
<div class="top-header">
<div>
<input style="font-size:24px;font-weight:bold;width:100%;" value="Syed Medical Store"/>
<input style="width:100%;" value="Ranipora Shangus, Anantnag"/>
<input style="width:100%;" value="9622783290"/>
<input style="width:100%;" value="DL No. : 114045/06"/>
</div>
<div style="text-align:right">
<p><strong>TERMS :</strong> <input value="Cash"/></p>
<p><strong>Invoice No. :</strong> <input value="10"/></p>
<p><strong>Date :</strong> <input value="25-12-2024"/></p>
</div>
</div>
<div class="patient-info">
<div>
<p><strong>Patient Name :</strong> <input value="AFROZA / KAVARIGAM / DR. MAQBOL MIR"/></p>
<p><strong>Patient Address :</strong> <input/></p>
</div>
<div style="text-align:right">
<p><strong>Patient ID :</strong> <input/></p>
</div>
</div>
<table id="medTable">
<thead>
<tr>
<th>S.N</th>
<th>PRODUCT</th>
<th>PACK</th>
<th>BATCH</th>
<th>EXP.</th>
<th>QTY.</th>
<th>MRP</th>
<th>SGST<br/>(%)</th>
<th>SGST<br/>(Amt)</th>
<th>CGST<br/>(%)</th>
<th>CGST<br/>(Amt)</th>
<th>AMOUNT</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><input value="PETRIL MD 0.25"/></td>
<td><input/></td>
<td><input value="PEBS0148"/></td>
<td><input value="02-2027"/></td>
<td><input onchange="calculateTotal()" value="6"/></td>
<td><input onchange="calculateTotal()" value="33.76"/></td>
<td><input onchange="calculateTotal()" value="6"/></td>
<td class="sgst-amt">0.00</td>
<td><input onchange="calculateTotal()" value="6"/></td>
<td class="cgst-amt">0.00</td>
<td class="total-amt">0.00</td>
</tr>
</tbody>
</table>
<button onclick="addRow()">+ Add Medicine</button>
<table class="summary">
<tr>
<td><strong>Total Amount Before Tax:</strong></td>
<td id="before-tax">‚Çπ0.00</td>
</tr>
<tr>
<td><strong>(+) Total Tax Amount :</strong></td>
<td id="total-tax">‚Çπ0.00</td>
</tr>
<tr>
<td><strong>Total Amount After Tax :</strong></td>
<td id="after-tax">‚Çπ0.00</td>
</tr>
<tr>
<td><strong>Round Off :</strong></td>
<td id="round-off">‚Çπ0.00</td>
</tr>
<tr>
<td><strong>GRAND TOTAL :</strong></td>
<td id="grand-total">‚Çπ0.00</td>
</tr>
</table><table class="summary"><tr><td colspan="2"><textarea style="width:100%;height:100px;">Goods once sold will not be taken back or exchanged.
Bills not paid due date will attract 24% interest.
All disputes subjected to Anantnag Jurisdiction only.
Prescribed Sale Tax declaration will be given.
Certified that the particulars given above are true and correct and the amount indicated represents the price actually charged.</textarea></td></tr></table>

<p><strong>For Syed Medical Store</strong><br/>Authorized Signatory</p>
<button class="print-btn" onclick="window.print()">üñ®Ô∏è Print</button>
</div>
<script>
    function calculateTotal() {
      let rows = document.querySelectorAll("#medTable tbody tr");
      let beforeTax = 0, totalTax = 0;
      rows.forEach(row => {
        const qty = parseFloat(row.cells[5].querySelector('input').value) || 0;
        const mrp = parseFloat(row.cells[6].querySelector('input').value) || 0;
        const sgstRate = parseFloat(row.cells[7].querySelector('input').value) || 0;
        const cgstRate = parseFloat(row.cells[9].querySelector('input').value) || 0;

        const base = (qty * mrp) / (1 + (sgstRate + cgstRate) / 100);
        const sgstAmt = (base * sgstRate) / 100;
        const cgstAmt = (base * cgstRate) / 100;
        const total = base + sgstAmt + cgstAmt;

        row.querySelector('.sgst-amt').textContent = sgstAmt.toFixed(2);
        row.querySelector('.cgst-amt').textContent = cgstAmt.toFixed(2);
        row.querySelector('.total-amt').textContent = total.toFixed(2);

        beforeTax += base;
        totalTax += sgstAmt + cgstAmt;
      });

      const afterTax = beforeTax + totalTax;
      const rounded = Math.round(afterTax);
      const roundOff = (rounded - afterTax).toFixed(2);

      document.getElementById("before-tax").textContent = `‚Çπ${beforeTax.toFixed(2)}`;
      document.getElementById("total-tax").textContent = `‚Çπ${totalTax.toFixed(2)}`;
      document.getElementById("after-tax").textContent = `‚Çπ${afterTax.toFixed(2)}`;
      document.getElementById("round-off").textContent = `‚Çπ${roundOff}`;
      document.getElementById("grand-total").textContent = `‚Çπ${rounded.toFixed(2)}`;
    }

    function addRow() {
      const tbody = document.querySelector("#medTable tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${tbody.rows.length + 1}</td>
        <td><input /></td>
        <td><input /></td>
        <td><input /></td>
        <td><input /></td>
        <td><input value="1" onchange="calculateTotal()" /></td>
        <td><input value="0" onchange="calculateTotal()" /></td>
        <td><input value="6" onchange="calculateTotal()" /></td>
        <td class="sgst-amt">0.00</td>
        <td><input value="6" onchange="calculateTotal()" /></td>
        <td class="cgst-amt">0.00</td>
        <td class="total-amt">0.00</td>
      `;
      tbody.appendChild(row);
      calculateTotal();
    }

    window.onload = calculateTotal;
  </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<button class="print-btn" onclick="downloadPDF()">üíæ Download PDF</button>
<script>
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('p', 'mm', 'a4');
    const source = document.querySelector('.invoice-box');
    await html2canvas(source).then(canvas => {
      const imgData = canvas.toDataURL('image/png');
      const pdfWidth = 210;
      const pageHeight = 297;
      const imgProps = doc.getImageProperties(imgData);
      const imgHeight = (imgProps.height * pdfWidth) / imgProps.width;
      let heightLeft = imgHeight;
      let position = 0;

      doc.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
      heightLeft -= pageHeight;

      while (heightLeft > 0) {
        position = heightLeft - imgHeight;
        doc.addPage();
        doc.addImage(imgData, 'PNG', 0, position, pdfWidth, imgHeight);
        heightLeft -= pageHeight;
      }

      doc.save("syed_medical_invoice.pdf");
    });
  }
</script>

</body>
</html>
